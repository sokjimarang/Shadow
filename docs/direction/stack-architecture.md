# Shadow ìŠ¤íƒ ì•„í‚¤í…ì²˜

## ê°œìš”

ShadowëŠ” FastAPI + ngrok + Slack ì—°ë™ êµ¬ì¡°ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. ì´ ë¬¸ì„œëŠ” ì™œ ì´ ì„¸ ê°€ì§€ êµ¬ì„± ìš”ì†Œê°€ ëª¨ë‘ í•„ìš”í•œì§€, ê·¸ë¦¬ê³  ì–´ë–»ê²Œ ìƒí˜¸ì‘ìš©í•˜ëŠ”ì§€ ì„¤ëª…í•©ë‹ˆë‹¤.

## ì‹œìŠ¤í…œ êµ¬ì¡°ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Shadow ì‹œìŠ¤í…œ                              â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚  â”‚  ë¡œì»¬ ì»´í“¨í„°    â”‚                                             â”‚
â”‚  â”‚  (Mac)          â”‚                                             â”‚
â”‚  â”‚                 â”‚                                             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                             â”‚
â”‚  â”‚  â”‚ FastAPI   â”‚  â”‚  â—„â”€â”€â”€ 1ï¸âƒ£ ì§ì ‘ í˜¸ì¶œ (ë¡œì»¬ì—ì„œë§Œ ê°€ëŠ¥)        â”‚
â”‚  â”‚  â”‚ :8000     â”‚  â”‚       â€¢ GET /status                         â”‚
â”‚  â”‚  â”‚           â”‚  â”‚       â€¢ POST /recording/start               â”‚
â”‚  â”‚  â”‚  main.py  â”‚  â”‚       â€¢ POST /analyze                       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚       â€¢ GET /patterns                       â”‚
â”‚  â”‚        â”‚        â”‚                                             â”‚
â”‚  â”‚        â”‚        â”‚                                             â”‚
â”‚  â”‚        â–²        â”‚                                             â”‚
â”‚  â”‚        â”‚        â”‚  â—„â”€â”€â”€ 2ï¸âƒ£ ngrok í„°ë„ë§                       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”  â”‚       â€¢ localhost:8000 â†’ ì¸í„°ë„· ë…¸ì¶œ       â”‚
â”‚  â”‚  â”‚  ngrok    â”‚  â”‚       â€¢ https://xxxx.ngrok.io              â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚                                             â”‚
â”‚  â”‚        â”‚        â”‚                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚           â”‚                                                       â”‚
â”‚           â”‚ í„°ë„ë§                                                â”‚
â”‚           â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚   ì¸í„°ë„·       â”‚                                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           â”‚                                                       â”‚
â”‚           â”‚ 3ï¸âƒ£ Slack â†’ FastAPI (ì¸ë°”ìš´ë“œ)                        â”‚
â”‚           â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  Slack Platform                    â”‚                          â”‚
â”‚  â”‚                                    â”‚                          â”‚
â”‚  â”‚  â€¢ ì´ë²¤íŠ¸ ë°œìƒ (ë²„íŠ¼ í´ë¦­, ë©”ì‹œì§€) â”‚                          â”‚
â”‚  â”‚  â€¢ Webhook ì „ì†¡                    â”‚                          â”‚
â”‚  â”‚    POST https://xxxx.ngrok.io/slack/events                   â”‚
â”‚  â”‚    POST https://xxxx.ngrok.io/slack/interactivity            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                     â”‚                                            â”‚
â”‚                     â”‚ 4ï¸âƒ£ FastAPI â†’ Slack (ì•„ì›ƒë°”ìš´ë“œ)            â”‚
â”‚                     â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  SlackClient (Python)              â”‚                          â”‚
â”‚  â”‚  shadow/slack/client.py            â”‚                          â”‚
â”‚  â”‚                                    â”‚                          â”‚
â”‚  â”‚  â€¢ send_question()                 â”‚                          â”‚
â”‚  â”‚  â€¢ send_message()                  â”‚                          â”‚
â”‚  â”‚  â€¢ update_message()                â”‚                          â”‚
â”‚  â”‚                                    â”‚                          â”‚
â”‚  â”‚  Bot Token ì‚¬ìš©                     â”‚                          â”‚
â”‚  â”‚  â†’ Slack API ì§ì ‘ í˜¸ì¶œ              â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## êµ¬ì„± ìš”ì†Œë³„ ì—­í• 

### 1ï¸âƒ£ FastAPI - í•µì‹¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„

#### ì£¼ìš” ì—­í• 

| ê¸°ëŠ¥ | ì„¤ëª… | ì—”ë“œí¬ì¸íŠ¸ |
|------|------|-----------|
| **Webhook ì„œë²„** | Slack ì´ë²¤íŠ¸ ìˆ˜ì‹  | `/slack/events`, `/slack/interactivity` |
| **API ì„œë²„** | ë…¹í™” ì œì–´, ë¶„ì„ íŠ¸ë¦¬ê±° | `/recording/*`, `/analyze` |
| **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§** | ì„œëª… ê²€ì¦, ë°ì´í„° ì²˜ë¦¬, DB ì €ì¥ | ëª¨ë“  ë¼ìš°í„° |
| **ìƒíƒœ ê´€ë¦¬** | ë…¹í™” ìƒíƒœ, ë¶„ì„ ìƒíƒœ ë“± | `AppState` í´ë˜ìŠ¤ |

#### ë¡œì»¬ API í˜¸ì¶œ ì˜ˆì‹œ

```bash
# ë…¹í™” ì‹œì‘ (ë¡œì»¬ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥)
curl http://localhost:8000/recording/start -X POST \
  -H "Content-Type: application/json" \
  -d '{"duration": 10, "fps": 10}'

# ìƒíƒœ ì¡°íšŒ
curl http://localhost:8000/status

# ë¶„ì„ ì‹¤í–‰
curl http://localhost:8000/analyze -X POST \
  -H "Content-Type: application/json" \
  -d '{"backend": "claude"}'
```

#### Slack Webhook ì²˜ë¦¬

`shadow/api/routers/slack.py`ì—ì„œ ì²˜ë¦¬:

```python
@router.post("/events")
async def receive_slack_event(request: Request, ...):
    # 1. JSON íŒŒì‹±
    # 2. URL Verification ì²˜ë¦¬
    # 3. Timestamp ê²€ì¦ (Replay attack ë°©ì§€)
    # 4. Signature ê²€ì¦ (Slack ì„œëª… í™•ì¸)
    # 5. ì´ë²¤íŠ¸ íƒ€ì…ë³„ ì²˜ë¦¬
    ...

@router.post("/interactivity")
async def receive_slack_interactivity(request: Request, ...):
    # ë²„íŠ¼ í´ë¦­, ë©”ë‰´ ì„ íƒ ë“± ì²˜ë¦¬
    # DBì— ì‘ë‹µ ì €ì¥
    # ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
    ...
```

---

### 2ï¸âƒ£ ngrok - ë¡œì»¬ ì„œë²„ í„°ë„ë§

#### ì£¼ìš” ì—­í• 

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| **í„°ë„ë§** | ë¡œì»¬ ì„œë²„ë¥¼ ì¸í„°ë„·ì— ë…¸ì¶œ |
| **ê°œë°œ/í…ŒìŠ¤íŠ¸** | í”„ë¡œë•ì…˜ ë°°í¬ ì—†ì´ Slack ì—°ë™ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ |
| **ë™ì  URL** | ì¬ì‹œì‘ ì‹œë§ˆë‹¤ ìƒˆë¡œìš´ URL ìƒì„± (ë¬´ë£Œ í”Œëœ) |

#### ì‹¤í–‰ ë°©ë²•

```bash
# scripts/start_ngrok.sh
ngrok http 8000

# ì¶œë ¥ ì˜ˆì‹œ:
# https://abc123.ngrok.io -> http://localhost:8000
```

#### Slack ì•± ì„¤ì •

ngrok URLì„ Slack ì•± ì„¤ì •ì— ë“±ë¡:

1. **Event Subscriptions**
   - Request URL: `https://abc123.ngrok.io/slack/events`

2. **Interactivity & Shortcuts**
   - Request URL: `https://abc123.ngrok.io/slack/interactivity`

âš ï¸ **ì£¼ì˜**: ngrok ì¬ì‹œì‘ ì‹œ URLì´ ë³€ê²½ë˜ë¯€ë¡œ Slack ì„¤ì •ë„ ì—…ë°ì´íŠ¸ í•„ìš” (ë¬´ë£Œ í”Œëœì˜ ê²½ìš°)

---

### 3ï¸âƒ£ Slack ì—°ë™ - ì–‘ë°©í–¥ í†µì‹ 

#### ì¸ë°”ìš´ë“œ: Slack â†’ FastAPI

**íë¦„**:
```
[ì‚¬ìš©ì] ë²„íŠ¼ í´ë¦­
    â†“
[Slack Platform] ì´ë²¤íŠ¸ ìƒì„±
    â†“
POST https://abc123.ngrok.io/slack/interactivity
    â†“
[ngrok] í„°ë„ë§
    â†“
POST http://localhost:8000/slack/interactivity
    â†“
[FastAPI] shadow/api/routers/slack.py:151
    â”œâ”€ ì„œëª… ê²€ì¦
    â”œâ”€ íƒ€ì„ìŠ¤íƒ¬í”„ ê²€ì¦
    â””â”€ _handle_block_actions() í˜¸ì¶œ
       â””â”€ ë°ì´í„°ë² ì´ìŠ¤ì— ì‘ë‹µ ì €ì¥
```

#### ì•„ì›ƒë°”ìš´ë“œ: FastAPI â†’ Slack

**ì½”ë“œ ì˜ˆì‹œ**:
```python
# shadow/slack/client.py
from shadow.slack.client import SlackClient

slack_client = SlackClient()
slack_client.send_question(
    channel="C1234567890",
    question=Question(
        id="q1",
        text="ì´ ì‘ì—…ì„ ìë™í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
        options=[
            QuestionOption(id="yes", text="ì˜ˆ", value="yes"),
            QuestionOption(id="no", text="ì•„ë‹ˆì˜¤", value="no"),
        ]
    )
)
```

**íë¦„**:
```
[Shadow ì‹œìŠ¤í…œ] ì§ˆë¬¸ ìƒì„±
    â†“
[SlackClient] send_question()
    â†“
POST https://slack.com/api/chat.postMessage
    (Bot Token ì‚¬ìš©)
    â†“
[Slack API] ë©”ì‹œì§€ ì „ì†¡
    â†“
[ì‚¬ìš©ì] Slack ì•±ì—ì„œ ë©”ì‹œì§€ ìˆ˜ì‹ 
```

**ì´ ê²½ìš° ngrok ë¶ˆí•„ìš”**: ì§ì ‘ Slack API í˜¸ì¶œ

---

## ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤: ë…¹í™” â†’ ë¶„ì„ â†’ HITL â†’ ì‘ë‹µ

### Phase 1: ë…¹í™” ì‹œì‘

```bash
# ë¡œì»¬ì—ì„œ API í˜¸ì¶œ
curl -X POST http://localhost:8000/recording/start \
  -H "Content-Type: application/json" \
  -d '{"duration": 30, "fps": 10}'
```

**FastAPI ì²˜ë¦¬**:
- `Recorder` ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
- ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œì—ì„œ ë…¹í™” ì‹œì‘
- ìƒíƒœ ë°˜í™˜: `{"message": "ë…¹í™” ì‹œì‘", "duration": 30}`

---

### Phase 2: ë¶„ì„ ì‹¤í–‰

```bash
curl -X POST http://localhost:8000/analyze \
  -H "Content-Type: application/json" \
  -d '{"backend": "claude"}'
```

**FastAPI ì²˜ë¦¬**:
1. í‚¤í”„ë ˆì„ ì¶”ì¶œ (`KeyframeExtractor`)
2. Vision AI ë¶„ì„ (`ClaudeAnalyzer`)
3. íŒ¨í„´ ê°ì§€ (`PatternAnalyzer`)
4. HITL ì§ˆë¬¸ ìƒì„±
5. Slackìœ¼ë¡œ ì§ˆë¬¸ ì „ì†¡ (**ì•„ì›ƒë°”ìš´ë“œ**)

---

### Phase 3: HITL ì§ˆë¬¸ ì „ì†¡

**Python ì½”ë“œ**:
```python
# FastAPI ë‚´ë¶€ì—ì„œ ì‹¤í–‰
slack_client = SlackClient()
message = slack_client.send_question(
    channel="C1234567890",
    question=Question(
        id="q1",
        text="'Submit ë²„íŠ¼ í´ë¦­' ì‘ì—…ì„ ìë™í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
        options=[
            QuestionOption(id="yes", text="âœ… ì˜ˆ", value="yes"),
            QuestionOption(id="no", text="âŒ ì•„ë‹ˆì˜¤", value="no"),
        ]
    )
)
```

**Slack ë©”ì‹œì§€ (Block Kit UI)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤” CLARIFICATION ì§ˆë¬¸              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  'Submit ë²„íŠ¼ í´ë¦­' ì‘ì—…ì„          â”‚
â”‚  ìë™í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [âœ… ì˜ˆ]  [âŒ ì•„ë‹ˆì˜¤]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Phase 4: ì‚¬ìš©ì ì‘ë‹µ

**ì‚¬ìš©ì ì•¡ì…˜**: Slackì—ì„œ "âœ… ì˜ˆ" ë²„íŠ¼ í´ë¦­

**Slack â†’ FastAPI (**ì¸ë°”ìš´ë“œ**)**:
```
POST https://abc123.ngrok.io/slack/interactivity
Content-Type: application/x-www-form-urlencoded

payload={
  "type": "block_actions",
  "user": {"id": "U1234567890"},
  "actions": [{
    "action_id": "hitl_answer_yes",
    "value": "{\"question_id\":\"q1\",\"option_id\":\"yes\"}"
  }],
  "message": {"ts": "1234567890.123456"},
  "container": {"channel_id": "C1234567890"}
}
```

**FastAPI ì²˜ë¦¬** (`shadow/api/routers/slack.py:233`):
```python
async def _handle_block_actions(payload: dict[str, Any]):
    # 1. question_id, option_id ì¶”ì¶œ
    # 2. DBì— ì‘ë‹µ ì €ì¥ (TODO: Phase 5)
    # 3. Slack ë©”ì‹œì§€ ì—…ë°ì´íŠ¸

    slack_client.update_message(
        channel=channel,
        ts=message_ts,
        text="ì‘ë‹µì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤",
        blocks=[
            {"type": "header", "text": {"type": "plain_text", "text": "âœ… ì‘ë‹µì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤"}},
            {"type": "section", "text": {"type": "mrkdwn", "text": "*ì„ íƒí•˜ì‹  ë‹µë³€:* âœ… ì˜ˆ"}},
        ]
    )
```

**ì—…ë°ì´íŠ¸ëœ Slack ë©”ì‹œì§€**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… ì‘ë‹µì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì„ íƒí•˜ì‹  ë‹µë³€: âœ… ì˜ˆ               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì‘ë‹µì: @doyoon                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì™œ ì„¸ ê°€ì§€ê°€ ëª¨ë‘ í•„ìš”í•œê°€?

### FastAPIê°€ í•„ìš”í•œ ì´ìœ 

| ì´ìœ  | ì„¤ëª… |
|------|------|
| **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§** | ë…¹í™”, ë¶„ì„, íŒ¨í„´ ê°ì§€ ë“± í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„ |
| **Webhook ì²˜ë¦¬** | Slack ì´ë²¤íŠ¸ ìˆ˜ì‹ , ê²€ì¦, ë¼ìš°íŒ… |
| **ìƒíƒœ ê´€ë¦¬** | ë…¹í™” ìƒíƒœ, ë¶„ì„ ìƒíƒœ, ì„¸ì…˜ ê´€ë¦¬ |
| **ë³´ì•ˆ** | Slack ì„œëª… ê²€ì¦, íƒ€ì„ìŠ¤íƒ¬í”„ ê²€ì¦ |

### ngrokì´ í•„ìš”í•œ ì´ìœ 

| ì´ìœ  | ì„¤ëª… |
|------|------|
| **ë¡œì»¬ ê°œë°œ** | í”„ë¡œë•ì…˜ ë°°í¬ ì—†ì´ Slack ì—°ë™ í…ŒìŠ¤íŠ¸ |
| **ì™¸ë¶€ ì ‘ê·¼** | Slackì´ ë¡œì»¬ ì„œë²„ì— Webhook ì „ì†¡ ê°€ëŠ¥ |
| **ê°„í¸í•¨** | ë³µì¡í•œ ì¸í”„ë¼ ì„¤ì • ì—†ì´ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥ |

### Slack ì—°ë™ì´ í•„ìš”í•œ ì´ìœ 

| ì´ìœ  | ì„¤ëª… |
|------|------|
| **HITL** | ì‚¬ìš©ìì—ê²Œ ì§ˆë¬¸í•˜ê³  ì‘ë‹µ ë°›ê¸° |
| **ì•Œë¦¼** | ë¶„ì„ ì™„ë£Œ, ì˜¤ë¥˜ ë°œìƒ ë“± ì´ë²¤íŠ¸ ì•Œë¦¼ |
| **ì¸í„°ë™ì…˜** | ë²„íŠ¼, ë©”ë‰´ ë“± UIë¥¼ í†µí•œ ì‚¬ìš©ì ì…ë ¥ |

---

## í”„ë¡œë•ì…˜ ë°°í¬ ì‹œ ë³€ê²½ ì‚¬í•­

### ngrok ëŒ€ì²´

í”„ë¡œë•ì…˜ì—ì„œëŠ” ngrok ëŒ€ì‹  ë‹¤ìŒ ì¤‘ í•˜ë‚˜ ì‚¬ìš©:

1. **í´ë¼ìš°ë“œ ì„œë²„ ì§ì ‘ ë°°í¬**
   - AWS EC2, Google Cloud Compute Engine ë“±
   - ê³ ì • IP ë˜ëŠ” ë„ë©”ì¸ í• ë‹¹
   - Slack ì„¤ì •: `https://api.example.com/slack/events`

2. **ì„œë²„ë¦¬ìŠ¤ ë°°í¬**
   - AWS Lambda + API Gateway
   - Google Cloud Functions
   - Slack ì„¤ì •: `https://abc123.execute-api.us-east-1.amazonaws.com/slack/events`

3. **ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜**
   - Kubernetes + Ingress
   - Docker Swarm
   - Slack ì„¤ì •: `https://shadow.k8s.example.com/slack/events`

### í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬

```bash
# ê°œë°œ í™˜ê²½ (.env.local)
SLACK_SIGNING_SECRET=dev_secret
SLACK_BOT_TOKEN=xoxb-dev-token

# í”„ë¡œë•ì…˜ í™˜ê²½ (AWS Secrets Manager, etc.)
SLACK_SIGNING_SECRET=prod_secret
SLACK_BOT_TOKEN=xoxb-prod-token
```

---

## ì°¸ê³  íŒŒì¼

- **FastAPI ì„œë²„**: `main.py`
- **Slack ë¼ìš°í„°**: `shadow/api/routers/slack.py`
- **Slack í´ë¼ì´ì–¸íŠ¸**: `shadow/slack/client.py`
- **ì„œë²„ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸**: `scripts/run_server.sh`
- **ngrok ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸**: `scripts/start_ngrok.sh`

---

## ê´€ë ¨ ë¬¸ì„œ

- [API Specification](./api_specifcation.md) - REST API ìƒì„¸ ìŠ¤í™
- [Data Schema](./data_schema.md) - ë°ì´í„° ëª¨ë¸ ì •ì˜
- [Service Plan](./main_service-plan-v1.2.md) - ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ì „ì²´ ê³„íš
